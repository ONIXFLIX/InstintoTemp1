(function(n,t,i){"use strict";(function(t){typeof define=="function"&&define.amd?define(["jquery"],t):typeof exports=="object"?module.exports=t(require("jquery")):t(n.jQuery)})(function(r){function l(n,t){return this.$element=r(n),t&&(r.type(t.delay)==="string"||r.type(t.delay)==="number")&&(t.delay={show:t.delay,hide:t.delay}),this.options=r.extend({},c,t),this._defaults=c,this._name=u,this._targetclick=!1,this.init(),e.push(this.$element),this}var u="webuiPopover",f="webui-popover",s="webui.popover",c={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",selector:!1,delay:{show:null,hide:300},async:{type:"GET",before:null,success:null,error:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",direction:"",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"><\/div><div class="webui-popover-inner"><a href="#" class="close"><\/a><h3 class="webui-popover-title"><\/h3><div class="webui-popover-content"><i class="icon-refresh"><\/i> <p>&nbsp;<\/p><\/div><\/div><\/div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,confirmClose:!1,confirmMessage:"Are you sure close?",abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""},hideEmpty:!1},a=f+"-rtl",e=[],v=r('<div class="webui-popover-backdrop"><\/div>'),w=0,b=!1,o=-2e3,h=r(t),k=function(n,t){return isNaN(n)?t||0:Number(n)},y=function(n){return n.data("plugin_"+u)},p=function(){for(var n=null,t=0;t<e.length;t++)n=y(e[t]),n&&n.hide(!0);h.trigger("hiddenAll."+s)},nt=function(n){for(var t=null,i=0;i<e.length;i++)t=y(e[i]),t&&t.id!==n.id&&t.hide(!0);h.trigger("hiddenAll."+s)},d="ontouchstart"in t.documentElement&&/Mobi/.test(navigator.userAgent),tt=function(n){var t={x:0,y:0},i;return n.type==="touchstart"||n.type==="touchmove"||n.type==="touchend"||n.type==="touchcancel"?(i=n.originalEvent.touches[0]||n.originalEvent.changedTouches[0],t.x=i.pageX,t.y=i.pageY):(n.type==="mousedown"||n.type==="mouseup"||n.type==="click")&&(t.x=n.pageX,t.y=n.pageY),t},g;l.prototype={init:function(){if(this.$element[0]instanceof t.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");if(this.getTrigger()!=="manual")if(d)this.$element.off("touchend",this.options.selector).on("touchend",this.options.selector,r.proxy(this.toggle,this));else if(this.getTrigger()==="click")this.$element.off("click",this.options.selector).on("click",this.options.selector,r.proxy(this.toggle,this));else if(this.getTrigger()==="hover")this.$element.off("mouseenter mouseleave click",this.options.selector).on("mouseenter",this.options.selector,r.proxy(this.mouseenterHandler,this)).on("mouseleave",this.options.selector,r.proxy(this.mouseleaveHandler,this));this._poped=!1;this._inited=!0;this._opened=!1;this._idSeed=w;this.id=u+this._idSeed;this.options.container=r(this.options.container||t.body).first();this.options.backdrop&&v.appendTo(this.options.container).hide();w++;this.getTrigger()==="sticky"&&this.show();this.options.selector&&(this._options=r.extend({},this.options,{selector:""}))},destroy:function(){for(var t=-1,n=0;n<e.length;n++)if(e[n]===this.$element){t=n;break}e.splice(t,1);this.hide();this.$element.data("plugin_"+u,null);this.getTrigger()==="click"?this.$element.off("click"):this.getTrigger()==="hover"&&this.$element.off("mouseenter mouseleave");this.$target&&this.$target.remove()},getDelegateOptions:function(){var n={};return this._options&&r.each(this._options,function(t,i){c[t]!==i&&(n[t]=i)}),n},hide:function(n,t){if((n||this.getTrigger()!=="sticky")&&this._opened)if(this.options.confirmClose){var i=confirm(this.options.confirmMessage);if(i)this.close(n,t);else return!1}else this.close(n,t)},close:function(n,t){var u,i;if(t&&(t.preventDefault(),t.stopPropagation()),this.xhr&&this.options.abortXHR===!0&&(this.xhr.abort(),this.xhr=null),u=r.Event("hide."+s),this.$element.trigger(u,[this.$target]),this.$target&&(this.$target.removeClass("in").addClass(this.getHideAnimation()),i=this,setTimeout(function(){i.$target.hide();i.getCache()||i.$target.remove()},i.getHideDelay())),this.options.backdrop&&v.hide(),this._opened=!1,this.$element.trigger("hidden."+s,[this.$target]),this.options.onHide)this.options.onHide(this.$target)},resetAutoHide:function(){var n=this,t=n.getAutoHide();t&&(n.autoHideHandler&&clearTimeout(n.autoHideHandler),n.autoHideHandler=setTimeout(function(){n.hide()},t))},delegate:function(n){var t=r(n).data("plugin_"+u);return t||(t=new l(n,this.getDelegateOptions()),r(n).data("plugin_"+u,t)),t},toggle:function(n){var t=this;n&&(n.preventDefault(),n.stopPropagation(),this.options.selector&&(t=this.delegate(n.currentTarget)));t[t.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){p()},hideOthers:function(){nt(this)},show:function(){if(!this._opened){var n=this.getTarget().removeClass().addClass(f).addClass(this._customTargetClass);if(this.options.multi||this.hideOthers(),!this.getCache()||!this._poped||this.content===""){if(this.content="",this.setTitle(this.getTitle()),this.options.closeable||n.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),this.canEmptyHide()&&this.content==="")return;n.show()}if(this.displayContent(),this.options.onShow)this.options.onShow(n);this.bindBodyEvents();this.options.backdrop&&v.show();this._opened=!0;this.resetAutoHide()}},displayContent:function(){var v=this.getElementPosition(),n=this.getTarget().removeClass().addClass(f).addClass(this._customTargetClass),t=this.getContentElement(),y=n[0].offsetWidth,p=n[0].offsetHeight,i="bottom",d=r.Event("show."+s),l,h,c,u,e;if(!this.canEmptyHide()||(l=t.children().html(),l===null||l.trim().length!==0)){if(this.$element.trigger(d,[n]),h=this.$element.data("width")||this.options.width,h===""&&(h=this._defaults.width),h!=="auto"&&n.width(h),c=this.$element.data("height")||this.options.height,c===""&&(c=this._defaults.height),c!=="auto"&&t.height(c),this.options.style&&this.$target.addClass(f+"-"+this.options.style),this.options.direction!=="rtl"||t.hasClass(a)||t.addClass(a),this.options.arrow||n.find(".webui-arrow").remove(),n.detach().css({top:o,left:o,display:"block"}),this.getAnimation()&&n.addClass(this.getAnimation()),n.appendTo(this.options.container),i=this.getPlacement(v),this.$element.trigger("added."+s),this.initTargetEvents(),this.options.padding||(this.options.height!=="auto"&&t.css("height",t.outerHeight()),this.$target.addClass("webui-no-padding")),this.options.maxHeight&&t.css("maxHeight",this.options.maxHeight),this.options.maxWidth&&t.css("maxWidth",this.options.maxWidth),y=n[0].offsetWidth,p=n[0].offsetHeight,u=this.getTargetPositin(v,i,y,p),this.$target.css(u.position).addClass(i).addClass("in"),this.options.type==="iframe"){var w=n.find("iframe"),b=n.width(),k=w.parent().height();this.options.iframeOptions.width!==""&&this.options.iframeOptions.width!=="auto"&&(b=this.options.iframeOptions.width);this.options.iframeOptions.height!==""&&this.options.iframeOptions.height!=="auto"&&(k=this.options.iframeOptions.height);w.width(b).height(k)}this.options.arrow||this.$target.css({margin:0});this.options.arrow&&(e=this.$target.find(".webui-arrow"),e.removeAttr("style"),i==="left"||i==="right"?e.css({top:this.$target.height()/2}):(i==="top"||i==="bottom")&&e.css({left:this.$target.width()/2}),u.arrowOffset&&(u.arrowOffset.left===-1||u.arrowOffset.top===-1?e.hide():e.css(u.arrowOffset)));this._poped=!0;this.$element.trigger("shown."+s,[this.$target])}},isTargetLoaded:function(){return this.getTarget().find("i.glyphicon-refresh").length===0},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var n=u+this._idSeed;this.$target=r(this.options.template).attr("id",n);this._customTargetClass=this.$target.attr("class")!==f?this.$target.attr("class"):null;this.getTriggerElement().attr("data-target",n)}return this.$target.data("trigger-element")||this.$target.data("trigger-element",this.getTriggerElement()),this.$target},removeTarget:function(){this.$target.remove();this.$target=null;this.$contentElement=null},getTitleElement:function(){return this.getTarget().find("."+f+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+f+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return k(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return k(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var n=this.$element.attr("data-cache");if(typeof n!="undefined")switch(n.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var n=this.$element.attr("data-delay-show");return typeof n!="undefined"?n:this.options.delay.show===0?0:this.options.delay.show||100},getHideDelay:function(){var n=this.$element.attr("data-delay-hide");return typeof n!="undefined"?n:this.options.delay.hide===0?0:this.options.delay.hide||100},getAnimation:function(){var n=this.$element.attr("data-animation");return n||this.options.animation},getHideAnimation:function(){var n=this.getAnimation();return n?n+"-out":"out"},setTitle:function(n){var t=this.getTitleElement();n?(this.options.direction!=="rtl"||t.hasClass(a)||t.addClass(a),t.html(n)):t.remove()},hasContent:function(){return this.getContent()},canEmptyHide:function(){return this.options.hideEmpty&&this.options.type==="html"},getIframe:function(){var n=r("<iframe><\/iframe>").attr("src",this.getUrl()),t=this;return r.each(this._defaults.iframeOptions,function(i){typeof t.options.iframeOptions[i]!="undefined"&&n.attr(i,t.options.iframeOptions[i])}),n},getContent:function(){var t,n;if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=r(this.getUrl());this.content.is(":visible")||this.content.show()}catch(i){throw new Error("Unable to get popover content. Invalid selector specified.");}}else this.content||(t="",t=r.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||t,this.content||(n=this.$element.next(),n&&n.hasClass(f+"-content")&&(this.content=n)));return this.content},setContent:function(n){var i=this.getTarget(),t=this.getContentElement();typeof n=="string"?t.html(n):n instanceof r&&(t.html(""),this.options.cache?n.removeClass(f+"-content").appendTo(t):n.clone(!0,!0).removeClass(f+"-content").appendTo(t));this.$target=i},isAsync:function(){return this.options.type==="async"},setContentASync:function(n){var t=this;this.xhr||(this.xhr=r.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(n,i){t.options.async.before&&t.options.async.before(t,n,i)},success:function(i){t.bindBodyEvents();t.content=n&&r.isFunction(n)?n.apply(t.$element[0],[i]):i;t.setContent(t.content);var u=t.getContentElement();u.removeAttr("style");t.displayContent();t.options.async.success&&t.options.async.success(t,i)},complete:function(){t.xhr=null},error:function(n,i){t.options.async.error&&t.options.async.error(t,n,i)}}))},bindBodyEvents:function(){if(!b)if(this.options.dismissible&&this.getTrigger()==="click")if(d)h.off("touchstart.webui-popover").on("touchstart.webui-popover",r.proxy(this.bodyTouchStartHandler,this));else{h.off("keyup.webui-popover").on("keyup.webui-popover",r.proxy(this.escapeHandler,this));h.off("click.webui-popover").on("click.webui-popover",r.proxy(this.bodyClickHandler,this))}else if(this.getTrigger()==="hover")h.off("touchend.webui-popover").on("touchend.webui-popover",r.proxy(this.bodyClickHandler,this))},mouseenterHandler:function(n){var t=this;n&&this.options.selector&&(t=this.delegate(n.currentTarget));t._timeout&&clearTimeout(t._timeout);t._enterTimeout=setTimeout(function(){t.getTarget().is(":visible")||t.show()},this.getDelayShow())},mouseleaveHandler:function(){var n=this;clearTimeout(n._enterTimeout);n._timeout=setTimeout(function(){n.hide()},this.getHideDelay())},escapeHandler:function(n){n.keyCode===27&&this.hideAll()},bodyTouchStartHandler:function(n){var i=this,t=r(n.currentTarget);t.on("touchend",function(n){i.bodyClickHandler(n);t.off("touchend")});t.on("touchmove",function(){t.off("touchend")})},bodyClickHandler:function(n){var f,i,t;for(b=!0,f=!0,i=0;i<e.length;i++)if(t=y(e[i]),t&&t._opened){var r=t.getTarget().offset(),o=r.left,s=r.top,h=r.left+t.getTarget().width(),c=r.top+t.getTarget().height(),u=tt(n),l=u.x>=o&&u.x<=h&&u.y>=s&&u.y<=c;if(l){f=!1;break}}f&&p()},initTargetEvents:function(){if(this.getTrigger()==="hover")this.$target.off("mouseenter mouseleave").on("mouseenter",r.proxy(this.mouseenterHandler,this)).on("mouseleave",r.proxy(this.mouseleaveHandler,this));this.$target.find(".close").off("click").on("click",r.proxy(this.hide,this,!0))},getPlacement:function(n){var t,o=this.options.container,u=o.innerWidth(),i=o.innerHeight(),h=o.scrollTop(),c=o.scrollLeft(),f=Math.max(0,n.left-c),r=Math.max(0,n.top-h);t=typeof this.options.placement=="function"?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement;var e=t==="horizontal",s=t==="vertical",l=t==="auto"||e||s;return l?t=f<u/3?r<i/3?e?"right-bottom":"bottom-right":r<i*2/3?s?r<=i/2?"bottom-right":"top-right":"right":e?"right-top":"top-right":f<u*2/3?r<i/3?e?f<=u/2?"right-bottom":"left-bottom":"bottom":r<i*2/3?e?f<=u/2?"right":"left":r<=i/2?"bottom":"top":e?f<=u/2?"right-top":"left-top":"top":r<i/3?e?"left-bottom":"bottom-left":r<i*2/3?s?r<=i/2?"bottom-left":"top-left":"left":e?"left-top":"top-left":t==="auto-top"?t=f<u/3?"top-right":f<u*2/3?"top":"top-left":t==="auto-bottom"?t=f<u/3?"bottom-right":f<u*2/3?"bottom":"bottom-left":t==="auto-left"?t=r<i/3?"left-top":r<i*2/3?"left":"left-bottom":t==="auto-right"&&(t=r<i/3?"right-bottom":r<i*2/3?"right":"right-top"),t},getElementPosition:function(){var n=this.$element[0].getBoundingClientRect(),i=this.options.container,u=i.css("position"),f;return i.is(t.body)||u==="static"?r.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||n.width,height:this.$element[0].offsetHeight||n.height}):u==="fixed"?(f=i[0].getBoundingClientRect(),{top:n.top-f.top+i.scrollTop(),left:n.left-f.left+i.scrollLeft(),width:n.width,height:n.height}):u==="relative"?{top:this.$element.offset().top-i.offset().top,left:this.$element.offset().left-i.offset().left,width:this.$element[0].offsetWidth||n.width,height:this.$element[0].offsetHeight||n.height}:void 0},getTargetPositin:function(n,i,r,u){var f=n,g=this.options.container,v=this.$element.outerWidth(),y=this.$element.outerHeight(),nt=t.documentElement.scrollTop+g.scrollTop(),tt=t.documentElement.scrollLeft+g.scrollLeft(),e={},l=null,p=this.options.arrow?20:0,s=10,h=v<p+s?p:0,c=y<p+s?p:0,a=0,it=t.documentElement.clientHeight+nt,rt=t.documentElement.clientWidth+tt,w=f.left+f.width/2-h>0,b=f.left+f.width/2+h<rt,k=f.top+f.height/2-c>0,d=f.top+f.height/2+c<it;switch(i){case"bottom":e={top:f.top+f.height,left:f.left+f.width/2-r/2};break;case"top":e={top:f.top-u,left:f.left+f.width/2-r/2};break;case"left":e={top:f.top+f.height/2-u/2,left:f.left-r};break;case"right":e={top:f.top+f.height/2-u/2,left:f.left+f.width};break;case"top-right":e={top:f.top-u,left:w?f.left-h:s};l={left:w?Math.min(v,r)/2+h:o};break;case"top-left":a=b?h:-s;e={top:f.top-u,left:f.left-r+f.width+a};l={left:b?r-Math.min(v,r)/2-h:o};break;case"bottom-right":e={top:f.top+f.height,left:w?f.left-h:s};l={left:w?Math.min(v,r)/2+h:o};break;case"bottom-left":a=b?h:-s;e={top:f.top+f.height,left:f.left-r+f.width+a};l={left:b?r-Math.min(v,r)/2-h:o};break;case"right-top":a=d?c:-s;e={top:f.top-u+f.height+a,left:f.left+f.width};l={top:d?u-Math.min(y,u)/2-c:o};break;case"right-bottom":e={top:k?f.top-c:s,left:f.left+f.width};l={top:k?Math.min(y,u)/2+c:o};break;case"left-top":a=d?c:-s;e={top:f.top-u+f.height+a,left:f.left-r};l={top:d?u-Math.min(y,u)/2-c:o};break;case"left-bottom":e={top:k?f.top-c:s,left:f.left-r};l={top:k?Math.min(y,u)/2+c:o}}return e.top+=this.getOffsetTop(),e.left+=this.getOffsetLeft(),{position:e,arrowOffset:l}}};r.fn[u]=function(n,t){var i=[],f=this.each(function(){var f=r.data(this,"plugin_"+u);f?n==="destroy"?f.destroy():typeof n=="string"&&i.push(f[n]()):(n?typeof n=="string"?n!=="destroy"&&(t||(f=new l(this,null),i.push(f[n]()))):typeof n=="object"&&(f=new l(this,n)):f=new l(this,null),r.data(this,"plugin_"+u,f))});return i.length?i:f};g=function(){var n=function(){p()},t=function(n,t){t=t||{};r(n).webuiPopover(t)},f=function(n){var t=!0;return r(n).each(function(n,f){t=t&&r(f).data("plugin_"+u)!==i}),t},e=function(n,t){t?r(n).webuiPopover(t).webuiPopover("show"):r(n).webuiPopover("show")},o=function(n){r(n).webuiPopover("hide")},s=function(n){c=r.extend({},c,n)},h=function(n,t){var i=r(n).data("plugin_"+u),f;i&&(f=i.getCache(),i.options.cache=!1,i.options.content=t,i._opened?(i._opened=!1,i.show()):i.isAsync()?i.setContentASync(t):i.setContent(t),i.options.cache=f)},l=function(n,t){var i=r(n).data("plugin_"+u),f,e;i&&(f=i.getCache(),e=i.options.type,i.options.cache=!1,i.options.url=t,i._opened?(i._opened=!1,i.show()):(i.options.type="async",i.setContentASync(i.content)),i.options.cache=f,i.options.type=e)};return{show:e,hide:o,create:t,isCreated:f,hideAll:n,updateContent:h,updateContentAsync:l,setDefaultOptions:s}}();n.WebuiPopovers=g})})(window,document);